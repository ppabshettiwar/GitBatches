/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
(function(n){"use strict";typeof define=="function"&&define.amd?define(n):typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=n():typeof Package!="undefined"?Sortable=n():window.Sortable=n()})(function(){"use strict";function a(n,t){var u,i,r;if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(n);this.el=n;this.options=t=gt({},t);n[d]=this;u={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(n.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(n,t){n.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(i in u)i in t||(t[i]=u[i]);pt(t);for(r in this)r.charAt(0)==="_"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:ni;f(n,"mousedown",this._onTapStart);f(n,"touchstart",this._onTapStart);this.nativeDraggable&&(f(n,"dragover",this),f(n,"dragenter",this));it.push(this._onDragOver);t.store&&this.sort(t.store.get(this))}function lt(t){o&&o.state!==t&&(i(o,"display",t?"none":""),!t&&o.state&&r.insertBefore(o,n),o.state=t)}function p(n,t,i){if(n){i=i||u;t=t.split(".");var r=t.shift().toUpperCase(),f=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(r===">*"&&n.parentNode===i||(r===""||n.nodeName.toUpperCase()==r)&&(!t.length||((" "+n.className+" ").match(f)||[]).length==t.length))return n;while(n!==i&&(n=n.parentNode))}return null}function ii(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move");n.preventDefault()}function f(n,t,i){n.addEventListener(t,i,!1)}function e(n,t,i){n.removeEventListener(t,i,!1)}function nt(n,t,i){if(n)if(n.classList)n.classList[i?"add":"remove"](t);else{var r=(" "+n.className+" ").replace(at," ").replace(" "+t+" "," ");n.className=(r+(i?" "+t:"")).replace(at," ")}}function i(n,t,i){var r=n&&n.style;if(r){if(i===void 0)return u.defaultView&&u.defaultView.getComputedStyle?i=u.defaultView.getComputedStyle(n,""):n.currentStyle&&(i=n.currentStyle),t===void 0?i:i[t];t in r||(t="-webkit-"+t);r[t]=i+(typeof i=="string"?"":"px")}}function wt(n,t,i){if(n){var u=n.getElementsByTagName(t),r=0,f=u.length;if(i)for(;r<f;r++)i(u[r],r);return u}return[]}function v(n,t,i,r,f,e,s){var h=u.createEvent("Event"),c=(n||t[d]).options,l="on"+i.charAt(0).toUpperCase()+i.substr(1);h.initEvent(i,!0,!0);h.to=t;h.from=f||t;h.item=r||t;h.clone=o;h.oldIndex=e;h.newIndex=s;t.dispatchEvent(h);c[l]&&c[l].call(n,h)}function bt(n,t,i,r,f,e){var o,s=n[d],h=s.options.onMove,c;return o=u.createEvent("Event"),o.initEvent("move",!0,!0),o.to=t,o.from=n,o.dragged=i,o.draggedRect=r,o.related=f||t,o.relatedRect=e||t.getBoundingClientRect(),n.dispatchEvent(o),h&&(c=h.call(s,o)),c}function kt(n){n.draggable=!1}function ri(){ct=!1}function ui(n,t){var r=n.lastElementChild,i=r.getBoundingClientRect();return(t.clientY-(i.top+i.height)>5||t.clientX-(i.right+i.width)>5)&&r}function fi(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function et(n){var t=0;if(!n||!n.parentNode)return-1;while(n&&(n=n.previousElementSibling))n.nodeName.toUpperCase()!=="TEMPLATE"&&t++;return t}function dt(n,t){var i,r;return function(){i===void 0&&(i=arguments,r=this,setTimeout(function(){i.length===1?n.call(r,i[0]):n.apply(r,i);i=void 0},t))}}function gt(n,t){if(n&&t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}var n,k,t,o,r,tt,h,ot,st,rt,ht,c,s,w,y={},b,l,ut,at=/\s+/g,d="Sortable"+(new Date).getTime(),g=window,u=g.document,vt=g.parseInt,ni=!!("draggable"in u.createElement("div")),yt=function(n){return n=u.createElement("x"),n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}(),ct=!1,ft=Math.abs,ei=[].slice,it=[],ti=dt(function(n,t,i){if(i&&t.scroll){var f,o,e=t.scrollSensitivity,s=t.scrollSpeed,c=n.clientX,l=n.clientY,a=window.innerWidth,v=window.innerHeight,r,u;if(ot!==i&&(h=t.scroll,ot=i,h===!0)){h=i;do if(h.offsetWidth<h.scrollWidth||h.offsetHeight<h.scrollHeight)break;while(h=h.parentNode)}h&&(f=h,o=h.getBoundingClientRect(),r=(ft(o.right-c)<=e)-(ft(o.left-c)<=e),u=(ft(o.bottom-l)<=e)-(ft(o.top-l)<=e));r||u||(r=(a-c<=e)-(c<=e),u=(v-l<=e)-(l<=e),(r||u)&&(f=g));(y.vx!==r||y.vy!==u||y.el!==f)&&(y.el=f,y.vx=r,y.vy=u,clearInterval(y.pid),f&&(y.pid=setInterval(function(){f===g?g.scrollTo(g.pageXOffset+r*s,g.pageYOffset+u*s):(u&&(f.scrollTop+=u*s),r&&(f.scrollLeft+=r*s))},24)))}},30),pt=function(n){var t=n.group;t&&typeof t=="object"||(t=n.group={name:t});["pull","put"].forEach(function(n){n in t||(t[n]=!0)});n.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return a.prototype={constructor:a,_onTapStart:function(n){var e=this,r=this.el,u=this.options,s=n.type,o=n.touches&&n.touches[0],t=(o||n).target,f=t,i=u.filter;if((s!=="mousedown"||n.button===0)&&!u.disabled&&(t=p(t,u.draggable,r),t)){if(n.stopPropagation(),c=et(t),typeof i=="function"){if(i.call(this,n,t,this)){v(e,f,"filter",t,r,c);n.preventDefault();return}}else if(i&&(i=i.split(",").some(function(n){return n=p(f,n.trim(),r),n?(v(e,n,"filter",t,r,c),!0):void 0}),i)){n.preventDefault();return}(!u.handle||p(f,u.handle,r))&&this._prepareDragStart(n,o,t)}},_prepareDragStart:function(t,i,u){var e=this,h=e.el,s=e.options,o=h.ownerDocument,c;u&&!n&&u.parentNode===h&&(b=t,r=h,n=u,k=n.parentNode,tt=n.nextSibling,w=s.group,c=function(){e._disableDelayedDrag();n.draggable=!0;nt(n,e.options.chosenClass,!0);e._triggerDragStart(i)},s.ignore.split(",").forEach(function(t){wt(n,t.trim(),kt)}),f(o,"mouseup",e._onDrop),f(o,"touchend",e._onDrop),f(o,"touchcancel",e._onDrop),s.delay?(f(o,"mouseup",e._disableDelayedDrag),f(o,"touchend",e._disableDelayedDrag),f(o,"touchcancel",e._disableDelayedDrag),f(o,"mousemove",e._disableDelayedDrag),f(o,"touchmove",e._disableDelayedDrag),e._dragStartTimer=setTimeout(c,s.delay)):c())},_disableDelayedDrag:function(){var n=this.el.ownerDocument;clearTimeout(this._dragStartTimer);e(n,"mouseup",this._disableDelayedDrag);e(n,"touchend",this._disableDelayedDrag);e(n,"touchcancel",this._disableDelayedDrag);e(n,"mousemove",this._disableDelayedDrag);e(n,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(b={target:n,clientX:t.clientX,clientY:t.clientY},this._onDragStart(b,"touch")):this.nativeDraggable?(f(n,"dragend",this),f(r,"dragstart",this._onDragStart)):this._onDragStart(b,!0);try{u.selection?u.selection.empty():window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(){r&&n&&(nt(n,this.options.ghostClass,!0),a.active=this,v(this,r,"start",n,r,c))},_emulateDragOver:function(){if(l){if(this._lastX===l.clientX&&this._lastY===l.clientY)return;this._lastX=l.clientX;this._lastY=l.clientY;yt||i(t,"display","none");var r=u.elementFromPoint(l.clientX,l.clientY),n=r,e=" "+this.options.group.name+"",f=it.length;if(n)do{if(n[d]&&n[d].options.groups.indexOf(e)>-1){while(f--)it[f]({clientX:l.clientX,clientY:l.clientY,target:r,rootEl:n});break}r=n}while(n=n.parentNode);yt||i(t,"display","")}},_onTouchMove:function(n){if(b){a.active||this._dragStarted();this._appendGhost();var u=n.touches?n.touches[0]:n,f=u.clientX-b.clientX,e=u.clientY-b.clientY,r=n.touches?"translate3d("+f+"px,"+e+"px,0)":"translate("+f+"px,"+e+"px)";ut=!0;l=u;i(t,"webkitTransform",r);i(t,"mozTransform",r);i(t,"msTransform",r);i(t,"transform",r);n.preventDefault()}},_appendGhost:function(){if(!t){var f=n.getBoundingClientRect(),s=i(n),e=this.options,o;t=n.cloneNode(!0);nt(t,e.ghostClass,!1);nt(t,e.fallbackClass,!0);i(t,"top",f.top-vt(s.marginTop,10));i(t,"left",f.left-vt(s.marginLeft,10));i(t,"width",f.width);i(t,"height",f.height);i(t,"opacity","0.8");i(t,"position","fixed");i(t,"zIndex","100000");i(t,"pointerEvents","none");e.fallbackOnBody&&u.body.appendChild(t)||r.appendChild(t);o=t.getBoundingClientRect();i(t,"width",f.width*2-o.width);i(t,"height",f.height*2-o.height)}},_onDragStart:function(t,e){var s=t.dataTransfer,h=this.options;this._offUpEvents();w.pull=="clone"&&(o=n.cloneNode(!0),i(o,"display","none"),r.insertBefore(o,n));e?(e==="touch"?(f(u,"touchmove",this._onTouchMove),f(u,"touchend",this._onDrop),f(u,"touchcancel",this._onDrop)):(f(u,"mousemove",this._onTouchMove),f(u,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(s&&(s.effectAllowed="move",h.setData&&h.setData.call(this,s,n)),f(u,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(u){var e=this.el,f,c,ft,h=this.options,v=h.group,y=v.put,b=w===v,et=h.sort,nt,it;if(u.preventDefault!==void 0&&(u.preventDefault(),h.dragoverBubble||u.stopPropagation()),ut=!0,w&&!h.disabled&&(b?et||(ft=!r.contains(n)):w.pull&&y&&(w.name===v.name||y.indexOf&&~y.indexOf(w.name)))&&(u.rootEl===void 0||u.rootEl===this.el)){if(ti(u,h,this.el),ct)return;if(f=p(u.target,h.draggable,e),c=n.getBoundingClientRect(),ft){lt(!0);o||tt?r.insertBefore(n,o||tt):et||r.appendChild(n);return}if(e.children.length===0||e.children[0]===t||e===u.target&&(f=ui(e,u))){if(f){if(f.animated)return;s=f.getBoundingClientRect()}lt(b);bt(r,e,n,c,f,s)!==!1&&(n.contains(e)||(e.appendChild(n),k=e),this._animate(c,n),f&&this._animate(s,f))}else if(f&&!f.animated&&f!==n&&f.parentNode[d]!==void 0){st!==f&&(st=f,rt=i(f),ht=i(f.parentNode));var s=f.getBoundingClientRect(),pt=s.right-s.left,wt=s.bottom-s.top,ot=/left|right|inline/.test(rt.cssFloat+rt.display)||ht.display=="flex"&&ht["flex-direction"].indexOf("row")===0,at=f.offsetWidth>n.offsetWidth,vt=f.offsetHeight>n.offsetHeight,yt=(ot?(u.clientX-s.left)/pt:(u.clientY-s.top)/wt)>.5,g=f.nextElementSibling,a=bt(r,e,n,c,f,s),l;a!==!1&&(ct=!0,setTimeout(ri,30),lt(b),a===1||a===-1?l=a===1:ot?(nt=n.offsetTop,it=f.offsetTop,l=nt===it?f.previousElementSibling===n&&!at||yt&&at:it>nt):l=g!==n&&!vt||yt&&vt,n.contains(e)||(l&&!g?e.appendChild(n):f.parentNode.insertBefore(n,l?g:f)),k=n.parentNode,this._animate(c,n),this._animate(s,f))}}},_animate:function(n,t){var r=this.options.animation,u;r&&(u=t.getBoundingClientRect(),i(t,"transition","none"),i(t,"transform","translate3d("+(n.left-u.left)+"px,"+(n.top-u.top)+"px,0)"),t.offsetWidth,i(t,"transition","all "+r+"ms"),i(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){i(t,"transition","");i(t,"transform","");t.animated=!1},r))},_offUpEvents:function(){var n=this.el.ownerDocument;e(u,"touchmove",this._onTouchMove);e(n,"mouseup",this._onDrop);e(n,"touchend",this._onDrop);e(n,"touchcancel",this._onDrop)},_onDrop:function(i){var f=this.el,p=this.options;clearInterval(this._loopId);clearInterval(y.pid);clearTimeout(this._dragStartTimer);e(u,"mousemove",this._onTouchMove);this.nativeDraggable&&(e(u,"drop",this),e(f,"dragstart",this._onDragStart));this._offUpEvents();i&&(ut&&(i.preventDefault(),p.dropBubble||i.stopPropagation()),t&&t.parentNode.removeChild(t),n&&(this.nativeDraggable&&e(n,"dragend",this),kt(n),nt(n,this.options.ghostClass,!1),nt(n,this.options.chosenClass,!1),r!==k?(s=et(n),s>=0&&(v(null,k,"sort",n,r,c,s),v(this,r,"sort",n,r,c,s),v(null,k,"add",n,r,c,s),v(this,r,"remove",n,r,c,s))):(o&&o.parentNode.removeChild(o),n.nextSibling!==tt&&(s=et(n),s>=0&&(v(this,r,"update",n,r,c,s),v(this,r,"sort",n,r,c,s)))),a.active&&((s===null||s===-1)&&(s=c),v(this,r,"end",n,r,c,s),this.save())),r=n=k=t=tt=o=h=ot=b=l=ut=s=st=rt=w=a.active=null)},handleEvent:function(t){var i=t.type;i==="dragover"||i==="dragenter"?n&&(this._onDragOver(t),ii(t)):(i==="drop"||i==="dragend")&&this._onDrop(t)},toArray:function(){for(var i=[],n,r=this.el.children,t=0,f=r.length,u=this.options;t<f;t++)n=r[t],p(n,u.draggable,this.el)&&i.push(n.getAttribute(u.dataIdAttr)||fi(n));return i},sort:function(n){var t={},i=this.el;this.toArray().forEach(function(n,r){var u=i.children[r];p(u,this.options.draggable,i)&&(t[n]=u)},this);n.forEach(function(n){t[n]&&(i.removeChild(t[n]),i.appendChild(t[n]))})},save:function(){var n=this.options.store;n&&n.set(this)},closest:function(n,t){return p(n,t||this.options.draggable,this.el)},option:function(n,t){var i=this.options;if(t===void 0)return i[n];i[n]=t;n==="group"&&pt(i)},destroy:function(){var n=this.el;n[d]=null;e(n,"mousedown",this._onTapStart);e(n,"touchstart",this._onTapStart);this.nativeDraggable&&(e(n,"dragover",this),e(n,"dragenter",this));Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")});it.splice(it.indexOf(this._onDragOver),1);this._onDrop();this.el=n=null}},a.utils={on:f,off:e,css:i,find:wt,is:function(n,t){return!!p(n,t,n)},extend:gt,throttle:dt,closest:p,toggleClass:nt,index:et},a.create=function(n,t){return new a(n,t)},a.version="1.4.1",a});
//# sourceMappingURL=Sortable.min.js.map
